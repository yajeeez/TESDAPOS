<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Order - TESDA POS</title>
  <link rel="icon" type="image/png" href="../img/TESDALOGO.png"/>
  <link rel="stylesheet" href="css/Order.css"/>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"/>
</head>
<body>
  <!-- Header -->
  <header>
    <div class="logo">
      <img src="../img/TESDALOGO.png" alt="Logo" class="logo-img"/>
      <span>TESDA POS SYSTEM</span>
    </div>
    <nav>
      <div class="cart-container">
        <button class="cart-btn" onclick="event.stopPropagation(); toggleCart()">
          <i class="fas fa-shopping-cart"></i>
          <span class="cart-count" id="cartCount">0</span>
        </button>
        <div class="cart-dropdown" id="cartDropdown" onclick="event.stopPropagation()">
          <div class="cart-header">
            <h3>Cart</h3>
            <button class="close-cart" onclick="event.stopPropagation(); toggleCart()">
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="cart-items" id="cartItems">
            <div class="empty-cart">Your cart is empty</div>
          </div>
          <div class="cart-footer" id="cartFooter" style="display: none;">
            <div class="cart-total">
              <strong>Total: ₱<span id="cartTotal">0.00</span></strong>
            </div>
            <div class="cart-actions">
              <button class="cancel-order-btn" onclick="event.stopPropagation(); cancelOrder()">
                <i class="fas fa-times-circle"></i> Cancel Order
              </button>
              <button class="checkout-btn" onclick="event.stopPropagation(); openPaymentModal()">
                <i class="fas fa-check-circle"></i> Checkout
              </button>
            </div>
          </div>
        </div>
      </div>
      <a href="index.html" class="back-btn"><i class="fas fa-arrow-left"></i> Back</a>
    </nav>
  </header>

  <!-- Order Section -->
  <section class="order-section">
    <!-- Category Filters -->
    <div class="category-filters">
      <button class="filter-btn active" onclick="filterProducts('All')">
        <i class="fas fa-th"></i> All
      </button>
      <button class="filter-btn" onclick="filterProducts('Food')">
        <i class="fas fa-utensils"></i> Food
      </button>
      <button class="filter-btn" onclick="filterProducts('Beverage')">
        <i class="fas fa-coffee"></i> Beverage
      </button>
      <button class="filter-btn" onclick="filterProducts('Snacks')">
        <i class="fas fa-cookie-bite"></i> Snacks
      </button>
    </div>

    <div class="card-grid">
      <!-- Products will be loaded dynamically here -->
    </div>
  </section>

  <!-- Footer -->
  <footer>
    <p>© 2025 TESDA POS Food Ordering System | All Rights Reserved</p>
  </footer>

  <!-- Confirmation Modal for Cancel Order -->
  <div class="modal-overlay" id="confirmModal" onclick="closeConfirmModal()">
    <div class="modal-content" onclick="event.stopPropagation()">
      <div class="modal-icon">
        <i class="fas fa-exclamation-triangle"></i>
      </div>
      <h3 class="modal-title">Cancel Order?</h3>
      <p class="modal-message">Are you sure you want to cancel your entire order? This will clear all items from your cart.</p>
      <div class="modal-actions">
        <button class="modal-btn modal-cancel" onclick="closeConfirmModal()">
          <i class="fas fa-arrow-left"></i> Keep Order
        </button>
        <button class="modal-btn modal-confirm" onclick="confirmCancelOrder()">
          <i class="fas fa-trash-alt"></i> Yes, Cancel
        </button>
      </div>
    </div>
  </div>

  <!-- Confirmation Modal for Remove Item -->
  <div class="modal-overlay" id="removeItemModal" onclick="closeRemoveItemModal()">
    <div class="modal-content" onclick="event.stopPropagation()">
      <div class="modal-icon">
        <i class="fas fa-exclamation-triangle"></i>
      </div>
      <h3 class="modal-title">Remove Item?</h3>
      <p class="modal-message" id="removeItemMessage">Are you sure you want to remove this item from your cart?</p>
      <div class="modal-actions">
        <button class="modal-btn modal-cancel" onclick="closeRemoveItemModal()">
          <i class="fas fa-arrow-left"></i> Keep Item
        </button>
        <button class="modal-btn modal-confirm" onclick="confirmRemoveItem()">
          <i class="fas fa-trash-alt"></i> Yes, Remove
        </button>
      </div>
    </div>
  </div>

  <!-- Payment Modal -->
  <div class="modal-overlay" id="paymentModal" onclick="closePaymentModal()">
    <div class="payment-modal-content" onclick="event.stopPropagation()">
      <div class="payment-modal-header">
        <h3 class="payment-modal-title">
          <i class="fas fa-credit-card"></i> Payment
        </h3>
      </div>
      
      <div class="payment-modal-body">
        <!-- Order Summary -->
        <div class="order-summary-section">
          <h4>Order Summary</h4>
          <div class="order-items-list" id="paymentOrderItems">
            <!-- Order items will be inserted here -->
          </div>
          <div class="order-total-section">
            <div class="total-row">
              <span>Subtotal:</span>
              <span>₱<span id="paymentSubtotal">0.00</span></span>
            </div>
            <div class="total-row">
              <span>Total:</span>
              <span class="total-amount">₱<span id="paymentTotal">0.00</span></span>
            </div>
          </div>
        </div>

        <!-- Payment Method Selection -->
        <div class="payment-method-section">
          <h4>Select Payment Method (Optional)</h4>
          <div class="payment-method-options">
            <button class="payment-method-btn" data-method="visa" onclick="selectPaymentMethod('visa')">
              <div class="payment-logo visa-logo">
                <svg viewBox="0 0 48 16" xmlns="http://www.w3.org/2000/svg">
                  <path fill="#1434CB" d="M18.5 0l-6.6 15.8h-3.7L5.3 3.6c-.2-.7-.3-1-.9-1.3C3.6 1.8 2.2 1.3.9.9L1 .2h6.2c.8 0 1.5.5 1.7 1.4l1.6 8.4L14.8.2h3.7zm14.7 10.6c0-4.2-5.8-4.4-5.8-6.3 0-.6.6-1.2 1.8-1.3.6 0 2.3-.1 4.2.7l.8-3.6C32.9.1 31.7 0 30.3 0c-3.5 0-6 1.9-6 4.5 0 2 1.8 3.1 3.1 3.7 1.4.7 1.8 1.1 1.8 1.7 0 .9-1.1 1.3-2.1 1.3-1.8 0-2.7-.3-4.2-.9l-.7 3.6c1 .4 2.7.8 4.5.8 3.7.1 6.1-1.8 6.1-4.6zm9.2 5.2h3.3L43.2.2h-3c-.7 0-1.3.4-1.6 1l-5.5 14.6h3.7l.7-2h4.6l.4 2zm-4-4.8l1.9-5.3 1.1 5.3h-3zm-16.3-11L19 15.8h-3.5L18.6 0h3.5z"/>
                </svg>
              </div>
              <span>Visa Card</span>
            </button>
            <button class="payment-method-btn" data-method="gcash" onclick="selectPaymentMethod('gcash')">
              <div class="payment-logo gcash-logo">
                <svg viewBox="0 0 120 40" xmlns="http://www.w3.org/2000/svg">
                  <rect fill="#007DFF" width="120" height="40" rx="4"/>
                  <text x="60" y="25" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="white" text-anchor="middle">GCash</text>
                </svg>
              </div>
              <span>GCash</span>
            </button>
            <button class="payment-method-btn" data-method="maya" onclick="selectPaymentMethod('maya')">
              <div class="payment-logo maya-logo">
                <svg viewBox="0 0 120 40" xmlns="http://www.w3.org/2000/svg">
                  <rect fill="#00D632" width="120" height="40" rx="4"/>
                  <text x="60" y="25" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="white" text-anchor="middle">Maya</text>
                </svg>
              </div>
              <span>Maya</span>
            </button>
          </div>
        </div>

        <!-- Cash Payment Section -->
        <div class="payment-section" id="cashPaymentSection" style="display: none;">
        </div>

        <!-- Card Payment Section -->
        <div class="payment-section" id="cardPaymentSection" style="display: none;">
          <div class="card-swipe-container">
            <div class="card-reader">
              <div class="card-reader-header">
                <i class="fas fa-microchip"></i>
                <span>Card Reader</span>
              </div>
              <div class="card-slot">
                <div class="swipe-indicator" id="swipeIndicator">
                  <i class="fas fa-arrow-right"></i>
                  <span>Please swipe your card</span>
                </div>
                <div class="card-swipe-area" id="cardSwipeArea">
                  <div class="swipe-line"></div>
                </div>
              </div>
              <button class="swipe-btn" id="simulateSwipeBtn" onclick="simulateCardSwipe()">
                <i class="fas fa-hand-pointer"></i> Simulate Card Swipe
              </button>
            </div>
            <div class="card-info" id="cardInfo" style="display: none;">
              <div class="card-details">
                  <p><strong>Card Number:</strong> <span id="cardNumber">**** **** **** 1234</span></p>
                <p><strong>Cardholder:</strong> <span id="cardHolder">Cardholder Name</span></p>
                <p class="total-amount-row"><strong>Total Amount:</strong> ₱<span id="cardTotalAmount">0.00</span></p>
                <p><strong>Transaction ID:</strong> <span id="transactionId"></span></p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="payment-modal-footer">
        <button class="payment-btn payment-cancel" onclick="closePaymentModal()">
          <i class="fas fa-times"></i> Cancel
        </button>
        <button class="payment-btn payment-confirm" id="confirmPaymentBtn" onclick="processPayment()">
          <i class="fas fa-print"></i> Print Receipt
        </button>
      </div>
    </div>
  </div>

  <!-- JS -->
  <script src="js/Order.js"></script>
</body>
</html>
