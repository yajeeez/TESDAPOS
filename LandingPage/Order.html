<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Order - TESDA POS</title>
  <link rel="icon" type="image/png" href="../img/TESDALOGO.png"/>
  <link rel="stylesheet" href="css/Order.css"/>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"/>
</head>
<body>
  <!-- Header -->
  <header>
    <div class="logo">
      <img src="../img/TESDALOGO.png" alt="Logo" class="logo-img"/>
      <span>TESDA POS SYSTEM</span>
    </div>
    <nav>
      <div class="cart-container">
        <button class="cart-btn" onclick="event.stopPropagation(); toggleCart()">
          <i class="fas fa-shopping-cart"></i>
          <span class="cart-count" id="cartCount">0</span>
        </button>
        <div class="cart-dropdown" id="cartDropdown" onclick="event.stopPropagation()">
          <div class="cart-header">
            <h3>Cart</h3>
            <button class="close-cart" onclick="event.stopPropagation(); toggleCart()">
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="cart-items" id="cartItems">
            <div class="empty-cart">Your cart is empty</div>
          </div>
          <div class="cart-footer" id="cartFooter" style="display: none;">
            <div class="cart-total">
              <strong>Total: ₱<span id="cartTotal">0.00</span></strong>
            </div>
            <div class="cart-actions">
              <button class="cancel-order-btn" onclick="event.stopPropagation(); cancelOrder()">
                <i class="fas fa-times-circle"></i> Cancel Order
              </button>
              <button class="checkout-btn" onclick="event.stopPropagation(); openPaymentModal()">
                <i class="fas fa-check-circle"></i> Checkout
              </button>
            </div>
          </div>
        </div>
      </div>
      <a href="index.html" class="back-btn"><i class="fas fa-arrow-left"></i> Back</a>
    </nav>
  </header>

  <!-- Order Section -->
  <section class="order-section">
    <!-- Category Filters -->
    <div class="category-filters">
      <button class="filter-btn active" onclick="filterProducts('All')">
        <i class="fas fa-th"></i> All
      </button>
      <button class="filter-btn" onclick="filterProducts('Food')">
        <i class="fas fa-utensils"></i> Food
      </button>
      <button class="filter-btn" onclick="filterProducts('Beverage')">
        <i class="fas fa-coffee"></i> Beverage
      </button>
      <button class="filter-btn" onclick="filterProducts('Snacks')">
        <i class="fas fa-cookie-bite"></i> Snacks
      </button>
    </div>

    <div class="card-grid">
      <!-- Products will be loaded dynamically here -->
    </div>
  </section>

  <!-- Footer -->
  <footer>
    <p>© 2025 TESDA POS Food Ordering System | All Rights Reserved</p>
  </footer>

  <!-- Confirmation Modal for Cancel Order -->
  <div class="modal-overlay" id="confirmModal" onclick="closeConfirmModal()">
    <div class="modal-content" onclick="event.stopPropagation()">
      <div class="modal-icon">
        <i class="fas fa-exclamation-triangle"></i>
      </div>
      <h3 class="modal-title">Cancel Order?</h3>
      <p class="modal-message">Are you sure you want to cancel your entire order? This will clear all items from your cart.</p>
      <div class="modal-actions">
        <button class="modal-btn modal-cancel" onclick="closeConfirmModal()">
          <i class="fas fa-arrow-left"></i> Keep Order
        </button>
        <button class="modal-btn modal-confirm" onclick="confirmCancelOrder()">
          <i class="fas fa-trash-alt"></i> Yes, Cancel
        </button>
      </div>
    </div>
  </div>

  <!-- Confirmation Modal for Remove Item -->
  <div class="modal-overlay" id="removeItemModal" onclick="closeRemoveItemModal()">
    <div class="modal-content" onclick="event.stopPropagation()">
      <div class="modal-icon">
        <i class="fas fa-exclamation-triangle"></i>
      </div>
      <h3 class="modal-title">Remove Item?</h3>
      <p class="modal-message" id="removeItemMessage">Are you sure you want to remove this item from your cart?</p>
      <div class="modal-actions">
        <button class="modal-btn modal-cancel" onclick="closeRemoveItemModal()">
          <i class="fas fa-arrow-left"></i> Keep Item
        </button>
        <button class="modal-btn modal-confirm" onclick="confirmRemoveItem()">
          <i class="fas fa-trash-alt"></i> Yes, Remove
        </button>
      </div>
    </div>
  </div>

  <!-- Payment Modal -->
  <div class="modal-overlay" id="paymentModal" onclick="closePaymentModal()">
    <div class="payment-modal-content" onclick="event.stopPropagation()">
      <div class="payment-modal-header">
        <h3 class="payment-modal-title">
          <i class="fas fa-credit-card"></i> Payment
        </h3>
      </div>
      
      <div class="payment-modal-body">
        <!-- Order Summary -->
        <div class="order-summary-section">
          <h4>Order Summary</h4>
          <div class="order-items-list" id="paymentOrderItems">
            <!-- Order items will be inserted here -->
          </div>
          <div class="order-total-section">
            <div class="total-row">
              <span>Subtotal:</span>
              <span>₱<span id="paymentSubtotal">0.00</span></span>
            </div>
            <div class="total-row">
              <span>Total:</span>
              <span class="total-amount">₱<span id="paymentTotal">0.00</span></span>
            </div>
          </div>
        </div>

        <!-- Payment Method Selection -->
        <div class="payment-method-section">
          <h4>Select Payment Method</h4>
          <div class="payment-method-options">
            <button class="payment-method-btn" data-method="cash" onclick="selectPaymentMethod('cash')">
              <i class="fas fa-money-bill-wave"></i>
              <span>Cash</span>
            </button>
            <button class="payment-method-btn" data-method="card" onclick="selectPaymentMethod('card')">
              <i class="fas fa-credit-card"></i>
              <span>Credit/Debit Card</span>
            </button>
          </div>
        </div>

        <!-- Cash Payment Section -->
        <div class="payment-section" id="cashPaymentSection" style="display: none;">
          <div class="payment-input-group">
            <label for="cashAmount">Amount Received:</label>
            <div class="cash-input-wrapper">
              <span class="currency-symbol">₱</span>
              <input type="number" id="cashAmount" placeholder="0.00" step="0.01" min="0" oninput="calculateChange()">
            </div>
          </div>
          <div class="change-display">
            <span>Change:</span>
            <span class="change-amount">₱<span id="changeAmount">0.00</span></span>
          </div>
        </div>

        <!-- Card Payment Section -->
        <div class="payment-section" id="cardPaymentSection" style="display: none;">
          <div class="card-swipe-container">
            <div class="card-reader">
              <div class="card-reader-header">
                <i class="fas fa-microchip"></i>
                <span>Card Reader</span>
              </div>
              <div class="card-slot">
                <div class="swipe-indicator" id="swipeIndicator">
                  <i class="fas fa-arrow-right"></i>
                  <span>Please swipe your card</span>
                </div>
                <div class="card-swipe-area" id="cardSwipeArea">
                  <div class="swipe-line"></div>
                </div>
              </div>
              <button class="swipe-btn" id="simulateSwipeBtn" onclick="simulateCardSwipe()">
                <i class="fas fa-hand-pointer"></i> Simulate Card Swipe
              </button>
            </div>
            <div class="card-info" id="cardInfo" style="display: none;">
              <div class="card-details">
                  <p><strong>Card Number:</strong> <span id="cardNumber">**** **** **** 1234</span></p>
                <p><strong>Cardholder:</strong> <span id="cardHolder">Cardholder Name</span></p>
                <p class="total-amount-row"><strong>Total Amount:</strong> ₱<span id="cardTotalAmount">0.00</span></p>
                <p><strong>Transaction ID:</strong> <span id="transactionId"></span></p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="payment-modal-footer">
        <button class="payment-btn payment-cancel" onclick="closePaymentModal()">
          <i class="fas fa-times"></i> Cancel
        </button>
        <button class="payment-btn payment-confirm" id="confirmPaymentBtn" onclick="processPayment()" disabled>
          <i class="fas fa-check"></i> Process Payment
        </button>
      </div>
    </div>
  </div>

  <!-- JS -->
  <script src="js/Order.js"></script>
</body>
</html>
